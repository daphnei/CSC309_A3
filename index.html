<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>	
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <link rel="stylesheet" href="css/custom.css">
	<link rel="stylesheet" href="css/jqm-demos.css">

    <!-- LOADING JSON -->
    <!-- TODO: move this into another file -->
    <script type="text/javascript">
        var USER_QUERY = "http://twitter.com/account/redirect_by_id?id=";

        $.getJSON("favs.json", function (tweets) {
            $.each(tweets, function() {
                tweet = this;

                var user, text, date;

                user = {
                    "name": tweet.user.name,
                    "screen_name": tweet.user.screen_name,
                    "location": tweet.user.location,
                    "description": tweet.user.description,
                    "url": tweet.user.url,
                    "twitter_url": USER_QUERY + tweet.user.id_str,
                    "image": tweet.user.profile_image_url
                };
                text = tweet.text;
                date = tweet.created_at;

                var shtml = "";
                
                shtml = shtml + "<div data-role='collapsible' data-collapsed='false' class='tweet'>";
                shtml = shtml + "<h3>Tweet by " + user.name + "</h3>";
                shtml = shtml + "<a href='" + user.twitter_url + "'>";
                shtml = shtml + "<img src='" + user.image + "'/>";
                shtml = shtml + "</a><br/>";
                shtml = shtml + "<p>' " + text + " '</p>";
                shtml = shtml + "<p>Created on " + date + "</p>";
                shtml = shtml + "</div>";
                console.log(shtml);
                
                $("#items").append(shtml);
            });
        });
    </script>
</head>
<body>
	<div data-role="page">
		<div data-role="header" data-theme="f">
            <h1>Your favorite Twitter accounts</h1>
   		</div>
        <div id="items" data-role="content" data-theme="b">
            <!-- Dynamic items go here -->
        </div>
	</div>
</body>
</html>
