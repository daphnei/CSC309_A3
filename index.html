
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery Mobile: Theme Download</title>
	
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile.structure-1.3.0.min.css" />
	<link rel="stylesheet" href="css/themes/Flutter.min.css" />
	<link rel="stylesheet" href="css/custom.css">
		
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
	
	<!-- User Scripts -->
	<script src="js/helper.js"></script>
	<script src="js/generateListView.js"></script>
	<script src="js/generateDetailsView.js"></script>
	<script src="js/favorites.js"></script>
    <script src="js/resize.js"></script>
</head>
<body>
    <div data-role="page" id="index" data-theme="a">
        
        <!-- HEADER -->
		<div data-role="header" data-id="mobile-header">
            <h1>Flutter</h1>
   		</div>
        <!-- MAIN BODY -->
        <div data-role="content">
            <ul data-role="listview" id="items" data-inset="true">
            <!-- Dynamic items will be generated here -->
            </ul>
        </div>

        <!-- FOOTER -->
		<div class="end-notification">
			<!-- Notification that user has reached end of tweets -->
		</div>
        <div class="jqm-footer">
            <p class="jqm-version"></p>
            <p>Made for CSC309 Winter 2013.</p>
        </div>
        
		<!-- POPUPS -->
        <!-- TWEETER DETAILS POPUP -->
        <div data-role="popup" data-theme="b" data-overlay-theme="a" id="details" class="ui-corner-all" data-transition="pop"  data-position-to="window">
        	<div data-role="content" class="ui-content">
                <div class="ui-grid-b breakpoint" id="details-content">
                    <!-- Dynamic popup content will be loaded into two columns here. -->
                </div><!-- /grid-b -->
            </div>
            
            <a href="#" data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right ">Close</a>
        </div>

<<<<<<< HEAD
        <!-- Image popup -->
        <div data-role="popup" data-corners="false". data-transition="pop" id="popupPhoto" data-position-to="window" data-overlay-theme="a">
=======
        <!-- IMAGE POPUP -->
        <div data-role="popup" data-transition="pop" id="popupPhoto" data-position-to="window" data-overlay-theme="a">
>>>>>>> fd428d99a67219457d02bd1f955befc9d3913a08
            <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
            <div id="images">
                <!-- Images will be loaded here-->
            </div>
        </div>
	</div>
	<div id="page_end"></div>
</body>
</html>

<script>
	window.onload=function(){
        favorites.loadFavorites('scripts/myfaves.json', '#items');
    }
    
    setInterval(function() {
		if($(window).scrollTop() + $(window).height() >= $(document).height() - 200) {
			if (favorites.unrenderedTweets()) {
				favorites.renderFavorites('#items');
				$(".end-notification").html("");
			} else {
				$(".end-notification").html("<p>No more tweets :(</p>");
			}
		}
	}, 200);

    //This does not work. Why?
    $("#index").on( "pageinit", function() {
                $( "#popupPhoto" ).on({
                    popupbeforeposition: function() {
                        console.log("Should be resizing photo.");
                        var maxHeight = $( window ).height() - 60 + "px";
                        $( "#popupPhoto img" ).css( "max-height", maxHeight );
                    }
                });
            });

    $(function(){
        $(window).resize(function(){
        // get the screen height and width  
        var maskHeight = $(window).height();  
        var maskWidth = $(window).width();

        // calculate the values for center alignment
        var dialogTop =  (maskHeight  - $('#dialog-box').height())/2;  
        var dialogLeft = (maskWidth - $('#dialog-box').width())/2; 

        // assign values to the overlay and dialog box
        $('#dialog-overlay').css({ height:$(document).height(), width:$(document).width() }).show();
        $('#dialog-box').css({ top: dialogTop, left: dialogLeft, position:"fixed"}).show();
        }).resize();
    });
</script>

